<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Ekonomi Araçları - Nexus Tools</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        .nav-tabs .nav-link {
            color: var(--text-muted);
            border: 1px solid transparent;
        }

        .nav-tabs .nav-link.active {
            background-color: var(--bg-secondary);
            color: var(--primary-color);
            border-color: var(--border-color) var(--border-color) var(--bg-secondary);
        }

        .tab-content {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 8px 8px;
            padding: 20px;
        }

        .player-row {
            background-color: var(--card-bg);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-card {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .highlight-val {
            color: var(--accent-color);
            font-weight: bold;
        }

        .text-azure {
            color: #007fff !important;
        }

        .border-azure {
            border-color: #007fff !important;
        }

        .text-nexus-green {
            color: #009900 !important;
        }

        .border-nexus-green {
            border-color: #009900 !important;
        }
    </style>
</head>

<body class="bg-dark text-light">

    <!-- Nav -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-darker border-bottom border-secondary mb-4">
        <div class="container">
            <a class="navbar-brand" href="../../index.html">
                <i class="fa-solid fa-dungeon me-2"></i>Nexus Tools
            </a>
            <span class="navbar-text ms-auto text-white fw-bold">Nexus Ekonomi Araçları</span>
        </div>
    </nav>

    <div class="container mb-5">

        <!-- Tabs -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="endgame-tab" data-bs-toggle="tab" data-bs-target="#endgame"
                    type="button" role="tab">
                    <i class="fa-solid fa-trophy me-2"></i>Campaign Sonu Ödülleri Hesaplayıcı
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="planner-tab" data-bs-toggle="tab" data-bs-target="#planner" type="button"
                    role="tab">
                    <i class="fa-solid fa-coins me-2"></i>Milestone -> Gold Dönüştürücü
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="budget-tab" data-bs-toggle="tab" data-bs-target="#budget" type="button"
                    role="tab">
                    <i class="fa-solid fa-sack-dollar me-2"></i>Başlangıç Bütçesi Hesaplayıcı
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="levelup-tab" data-bs-toggle="tab" data-bs-target="#levelup" type="button"
                    role="tab">
                    <i class="fa-solid fa-arrow-up-right-dots me-2"></i>Level Atlama Hesaplayıcı
                </button>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent">

            <!-- Tab 1 -->
            <div class="tab-pane fade show active" id="endgame" role="tabpanel">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label class="form-label">Oyun Süresi</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="gameHours" placeholder="Saat" min="0" max="96">
                            <span class="input-group-text">Sa</span>
                            <input type="number" class="form-control" id="gameMinutes" placeholder="Dk" min="0"
                                max="59">
                            <span class="input-group-text">Dk</span>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3 d-flex align-items-center gap-2" style="padding-top: 2rem;">
                        <input type="checkbox" class="form-check-input m-0" id="vipDM">
                        <label class="form-label mb-0" for="vipDM">VIP DM</label>
                    </div>
                </div>

                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="form-label mb-0">Avatarlar</label>
                    <button class="btn btn-sm btn-outline-success" onclick="addPlayerRow('endgame')">
                        <i class="fa-solid fa-plus me-1"></i>Avatar Ekle
                    </button>
                </div>
                <div id="endgame-players">
                    <!-- Dynamic Rows -->
                </div>

                <div class="d-grid mb-4">
                    <button class="btn btn-primary" onclick="calculateEndGame()">
                        Hesapla
                    </button>
                </div>

                <!-- Warnings -->
                <div id="minHoursWarning" class="alert alert-danger d-flex align-items-center mt-4 mb-0 d-none" role="alert">
                    <i class="fa-solid fa-clock fa-2x me-3"></i>
                    <div>
                        <strong>SÜRE YETERSİZ!</strong><br>
                        Oyun süresi minimum 3 saat olmalıdır. Lütfen süreyi kontrol ediniz.
                    </div>
                </div>


                <!-- Results -->
                <div id="endgame-result" class="d-none">
                    <div class="result-card border-nexus-green">
                        <h5 class="border-bottom pb-2 mb-3 text-nexus-green border-nexus-green">Oyuncu Sonuçları</h5>
                        <ul class="list-group list-group-flush bg-transparent" id="resPlayerList">
                            <!-- JS Generated -->
                        </ul>
                        <div class="mt-2 px-3 text-end">
                            <small class="d-block text-white-50" style="font-size: 0.75rem;"><span
                                    class="text-info fw-bold">MS:</span> Milestone</small>
                            <small class="d-block text-white-50" style="font-size: 0.75rem;"><span
                                    class="text-success fw-bold">GT:</span> Genesis Token</small>
                        </div>
                    </div>

                    <div class="result-card border-warning">
                        <h5 class="border-bottom pb-2 mb-3 text-warning border-warning">DM Ödülleri</h5>
                        <div class="row text-center">
                            <div class="col-4">
                                <small class="text-white d-block">DM Puanı Ortalaması</small>
                                <span class="highlight-val text-warning" id="resDMAvg">-</span>
                            </div>
                            <div class="col-4">
                                <small class="text-white d-block">Milestone</small>
                                <span class="highlight-val text-warning" id="resDMMS">-</span>
                            </div>
                            <div class="col-4">
                                <small class="text-white d-block">Genesis Token</small>
                                <span class="highlight-val text-warning" id="resDMGenesis">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 2 -->
            <div class="tab-pane fade" id="planner" role="tabpanel">

                <!-- Form -->
                <div class="row g-3">
                    <!-- Level -->
                    <div class="col-12">
                        <label class="form-label text-white">Mevcut Seviye</label>
                        <select class="form-select text-center fw-bold" id="msCurrentLevel">
                            <!-- 1-19 -->
                            <option value="1">Level 1</option>
                            <option value="2">Level 2</option>
                            <option value="3">Level 3</option>
                            <option value="4">Level 4</option>
                            <option value="5">Level 5</option>
                            <option value="6">Level 6</option>
                            <option value="7">Level 7</option>
                            <option value="8">Level 8</option>
                            <option value="9">Level 9</option>
                            <option value="10">Level 10</option>
                            <option value="11">Level 11</option>
                            <option value="12">Level 12</option>
                            <option value="13">Level 13</option>
                            <option value="14">Level 14</option>
                            <option value="15">Level 15</option>
                            <option value="16">Level 16</option>
                            <option value="17">Level 17</option>
                            <option value="18">Level 18</option>
                            <option value="19">Level 19</option>
                        </select>
                    </div>

                    <!-- Normal MS -->
                    <div class="col-md-6">
                        <label class="form-label text-white">Mevcut MS</label>
                        <input type="number" class="form-control" id="msCurrentCount" min="0" value="0">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label text-success">Eklenen MS</label>
                        <input type="number" class="form-control" id="msAddedCount" min="0" value="0">
                    </div>

                    <!-- Epic MS -->
                    <div class="col-md-6">
                        <label class="form-label text-white">Mevcut Epic MS</label>
                        <input type="number" class="form-control" id="msCurrentEpic" min="0" value="0" disabled>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label text-success">Eklenen Epic MS</label>
                        <input type="number" class="form-control" id="msAddedEpic" min="0" value="0">
                    </div>
                </div>

                <div class="d-grid my-4">
                    <button class="btn btn-primary" onclick="calculateMilestoneGold()">
                        Hesapla
                    </button>
                </div>

                <!-- Warning -->
                <div id="msEpicWarning" class="alert alert-danger d-flex align-items-center d-none" role="alert">
                    <i class="fa-solid fa-triangle-exclamation fa-2x me-3"></i>
                    <div>
                        <strong>HATA:</strong><br>
                        Epic Milestone sistemi sadece 15. seviye ve üzerindeki karakterler için geçerlidir. 15. seviye
                        altında Epic Milestone kazanamaz veya kullanamazsınız.
                    </div>
                </div>

                <!-- Result -->
                <div id="msResult" class="result-card d-none text-center">
                    <div class="mb-4">
                        <div class="text-white small mb-1">Toplam Kazanılan GP</div>
                        <div class="display-4 fw-bold text-accent" id="msTotalGold">0 GP</div>
                    </div>

                    <div class="row g-3 text-start">
                        <div class="col-md-6">
                            <div class="p-3 border border-secondary rounded bg-darker h-100">
                                <small class="text-white d-block mb-1">Elde Kalan Milestone</small>
                                <div class="fs-4 fw-bold text-white"><span id="msRemNormal" class="text-info">0</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="p-3 border border-secondary rounded bg-darker h-100">
                                <small class="text-white d-block mb-1">Elde Kalan Epic Milestone</small>
                                <div class="fs-4 fw-bold text-white"><span id="msRemEpic" class="text-info">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 p-3 border border-secondary rounded bg-darker text-start">
                        <h6 class="text-white border-bottom border-secondary pb-2 mb-2">Detaylı Döküm</h6>
                        <ul class="list-unstyled mb-0 small text-info" id="msBreakdown">
                            <li>Henüz hesaplama yapılmadı.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Tab 3 -->
            <div class="tab-pane fade" id="budget" role="tabpanel">
                <div class="row g-3">
                        
                    <div class="col-12">
                        <label class="form-label text-white">Hedef Seviye</label>
                        <select class="form-select text-center fw-bold" id="budgetLevel">
                            <!-- JS Generated -->
                        </select>
                    </div>

                    <div class="col-12">
                        <div class="result-card text-center mb-4">
                            <div class="text-white small mb-1">Başlangıç Bütçeniz</div>
                            <div class="display-4 fw-bold text-accent" id="budgetTotal">0 GP</div>
                        </div>
                    </div>

                    <!-- Warning -->
                    <div class="col-12">
                        <div id="budgetWarning" class="alert alert-warning d-flex align-items-center d-none" role="alert">
                            <i class="fa-solid fa-triangle-exclamation fa-2x me-3"></i>
                            <div>
                                <strong>DİKKAT!</strong><br>
                                Level 6 ve üzeri başlangıçlar için ADMIN'den özel onay almalısınız.
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Tab 4 -->
            <div class="tab-pane fade" id="levelup" role="tabpanel">
                <div class="row g-3">
                    
                    <div class="col-12">
                        <label for="lvlCurrent" class="form-label d-flex justify-content-between text-white">
                            <span>Mevcut Seviye</span>
                            <span class="fw-bold text-white" id="lvlCurrentDisplay">1</span>
                        </label>
                        <input type="range" class="form-range" id="lvlCurrent" min="1" max="19" value="1">
                    </div>

                    <div class="col-12">
                        <label for="lvlTarget" class="form-label d-flex justify-content-between text-white">
                            <span>Hedef Seviye</span>
                            <span class="fw-bold text-white" id="lvlTargetDisplay">2</span>
                        </label>
                        <input type="range" class="form-range" id="lvlTarget" min="2" max="20" value="2">
                    </div>

                    <div class="col-12">
                        <hr class="border-secondary my-2">
                    </div>

                    <div class="col-12">
                        <div class="result-card text-center mb-0">
                            <div class="text-white small mb-1">Gereken Milestone</div>
                            <div class="display-4 fw-bold text-accent" id="lvlResult">1</div>
                        </div>
                    </div>

                    <div class="col-12">
                         <div class="alert alert-info d-flex align-items-center mb-0 d-none" id="lvlFlexInfo" role="alert">
                            <i class="fa-solid fa-lightbulb fa-2x me-3"></i>
                            <div id="lvlFlexText" class="small"></div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <!-- Templates -->
    <template id="tpl-endgame-row">
        <div class="player-row">
            <div class="flex-grow-1">
                <label class="small text-white">Level</label>
                <input type="number" class="form-control form-control-sm inp-level" min="1" max="20" placeholder="Lvl"
                    required>
            </div>
            <div class="flex-grow-1">
                <label class="small text-white">DM Puanı</label>
                <input type="number" class="form-control form-control-sm inp-points" min="1" max="5" placeholder="1-5"
                    required>
            </div>
            <div class="d-flex align-items-center ms-3" style="padding-top: 1.4rem;">
                <input type="checkbox" class="form-check-input inp-vip m-0 me-2">
                <label class="small text-white mb-0" style="white-space: nowrap;">VIP Avatar</label>
            </div>
            <button class="btn btn-sm btn-outline-danger mt-3" onclick="this.parentElement.remove()">
                <i class="fa-solid fa-trash"></i>
            </button>
        </div>
    </template>

    <template id="tpl-planner-row">
        <div class="player-row">
            <div class="flex-grow-1">
                <label class="small text-white">Level</label>
                <input type="number" class="form-control form-control-sm inp-level" min="1" max="20" placeholder="Lvl"
                    required>
            </div>
            <button class="btn btn-sm btn-outline-danger mt-3" onclick="this.parentElement.remove()">
                <i class="fa-solid fa-trash"></i>
            </button>
        </div>
    </template>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>

</html>